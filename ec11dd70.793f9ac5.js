(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{127:function(t,e,n){"use strict";n.r(e),n.d(e,"frontMatter",(function(){return i})),n.d(e,"metadata",(function(){return p})),n.d(e,"rightToc",(function(){return c})),n.d(e,"default",(function(){return l}));var o=n(2),r=n(6),a=(n(0),n(131)),i={id:"testing-with-host",title:"Testing With Host"},p={id:"testing-with-host",title:"Testing With Host",description:"Testing a component with a host component is a more elegant and powerful technique to test your component.",source:"@site/docs/testing-with-host.md",permalink:"/spectator/docs/testing-with-host",editUrl:"https://github.com/ngneat/spectator/edit/master/docs/docs/testing-with-host.md",sidebar:"docs",previous:{title:"Testing Services",permalink:"/spectator/docs/testing-services"},next:{title:"Testing With Http",permalink:"/spectator/docs/testing-with-http"}},c=[{value:"Setting factory defaults",id:"setting-factory-defaults",children:[]},{value:"Custom Host Component",id:"custom-host-component",children:[]}],s={rightToc:c};function l(t){var e=t.components,n=Object(r.a)(t,["components"]);return Object(a.b)("wrapper",Object(o.a)({},s,n,{components:e,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Testing a component with a host component is a more elegant and powerful technique to test your component.\nIt basically gives you the ability to write your tests in the same way that you write your code. Let's see it in action:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-ts"}),"import { createHostFactory, SpectatorHost } from '@ngneat/spectator';\n\ndescribe('ZippyComponent', () => {\n  let spectator: SpectatorHost<ZippyComponent>;\n  const createHost = createHostFactory(ZippyComponent);\n\n  it('should display the title from host property', () => {\n    spectator = createHost(`<zippy [title]=\"title\"></zippy>`, {\n      hostProps: {\n        title: 'Spectator is Awesome'\n      }\n    });\n    expect(spectator.query('.zippy__title')).toHaveText('Spectator is Awesome');\n  });\n\n  it('should display the \"Close\" word if open', () => {\n    spectator = createHost(`<zippy title=\"Zippy title\">Zippy content</zippy>`);\n\n    spectator.click('.zippy__title');\n\n    expect(spectator.query('.arrow')).toHaveText('Close');\n    expect(spectator.query('.arrow')).not.toHaveText('Open');\n  });\n});\n")),Object(a.b)("p",null,"The host method returns an instance of ",Object(a.b)("inlineCode",{parentName:"p"},"SpectatorHost")," which extends ",Object(a.b)("inlineCode",{parentName:"p"},"Spectator")," with the following additional API:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"hostFixture")," - The host's fixture"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"hostComponent")," - The host's component instance"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"hostElement")," - The host's native element"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"hostDebugElement")," - The host's fixture debug element"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"setHostInput")," -  Changes the value of an ",Object(a.b)("inlineCode",{parentName:"li"},"@Input()")," of the host component"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"queryHost")," - Read more about ",Object(a.b)("a",Object(o.a)({parentName:"li"},{href:"./queries"}),"querying")," in Spectator"),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"queryHostAll")," - Read more about ",Object(a.b)("a",Object(o.a)({parentName:"li"},{href:"./queries"}),"querying")," in Spectator")),Object(a.b)("h3",{id:"setting-factory-defaults"},"Setting factory defaults"),Object(a.b)("p",null,"It is possible to set a default template when creating the factory. Here is an example:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-ts"}),"describe('With default template', () => {\n  let spectator: SpectatorWithHost<ZippyComponent>;\n\n  const createHost = createHostFactory({\n    component: ZippyComponent,\n    template: `<zippy [title]=\"title\"></zippy>`\n  });\n\n  it('should display the title from host property', () => {\n    spectator = createHost(undefined, {\n      hostProps: {\n        title: 'Spectator is Awesome'\n      }\n    });\n    expect(spectator.query('.zippy__title')).toHaveText('Spectator is Awesome');\n  });\n});\n")),Object(a.b)("h3",{id:"custom-host-component"},"Custom Host Component"),Object(a.b)("p",null,"Sometimes it's helpful to pass your own host implementation. We can pass a custom host component to the ",Object(a.b)("inlineCode",{parentName:"p"},"createHostComponentFactory()")," that will replace the default one:"),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-ts"}),"@Component({ selector: 'custom-host', template: '' })\nclass CustomHostComponent {\n  title = 'Custom HostComponent';\n}\n\ndescribe('With Custom Host Component', function () {\n  let spectator: SpectatorHost<ZippyComponent, CustomHostComponent>;\n  const createHost = createHostFactory({\n    component: ZippyComponent,\n    host: CustomHostComponent\n  });\n\n  it('should display the host component title', () => {\n    spectator = createHost(`<zippy [title]=\"title\"></zippy>`);\n    expect(spectator.query('.zippy__title')).toHaveText('Custom HostComponent');\n  });\n});\n")))}l.isMDXComponent=!0},131:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return h}));var o=n(0),r=n.n(o);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},a=Object.keys(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var s=r.a.createContext({}),l=function(t){var e=r.a.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):p({},e,{},t)),n},u=function(t){var e=l(t.components);return r.a.createElement(s.Provider,{value:e},t.children)},m={inlineCode:"code",wrapper:function(t){var e=t.children;return r.a.createElement(r.a.Fragment,{},e)}},b=Object(o.forwardRef)((function(t,e){var n=t.components,o=t.mdxType,a=t.originalType,i=t.parentName,s=c(t,["components","mdxType","originalType","parentName"]),u=l(n),b=o,h=u["".concat(i,".").concat(b)]||u[b]||m[b]||a;return n?r.a.createElement(h,p({ref:e},s,{components:n})):r.a.createElement(h,p({ref:e},s))}));function h(t,e){var n=arguments,o=e&&e.mdxType;if("string"==typeof t||o){var a=n.length,i=new Array(a);i[0]=b;var p={};for(var c in e)hasOwnProperty.call(e,c)&&(p[c]=e[c]);p.originalType=t,p.mdxType="string"==typeof t?t:o,i[1]=p;for(var s=2;s<a;s++)i[s]=n[s];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);